{% extends "dashboard/base_dashboard.html" %}

{% block dashboard_content %}

{% load static %}

<!-- Summernote CSS -->
<link href="https://cdn.jsdelivr.net/npm/summernote@0.8.20/dist/summernote-bs5.min.css"
      rel="stylesheet">

<!-- jQuery (obligatorio para Summernote) -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- Summernote JS -->
<script src="https://cdn.jsdelivr.net/npm/summernote@0.8.20/dist/summernote-bs5.min.js"></script>



<div class="container my-4">
  <div class="card shadow-sm border-0">
    <div class="card-header bg-light">
      <h5 class="mb-0 fw-bold">âœï¸ Editar noticia</h5>
    </div>

    <div class="card-body">
      <form method="post" enctype="multipart/form-data">
        {% csrf_token %}

        <!-- TÃ­tulo -->
        <div class="mb-3">
          <label class="form-label fw-bold">TÃ­tulo</label>
          {{ form.titulo }}
        </div>

        <!-- Contenido -->
        <div class="mb-3">
          <label class="form-label fw-bold">Contenido</label>
          {{ form.contenido|safe }}
        </div>

        <!-- Estado -->
        <div class="mb-3">
          <label class="form-label fw-bold">Estado</label>
          {{ form.estado }}
        </div>

        <hr>

        <!-- Fotos actuales -->
        <h6 class="fw-bold mb-3">ğŸ“· ImÃ¡genes actuales</h6>
        <div class="row g-3">
          {% for foto in object.fotos.all %}
          <div class="col-6 col-md-3">
            <div class="card">
              <img src="{{ foto.imagen.url }}" class="card-img-top">
              <div class="card-body p-2 text-center">
                <a href="{% url 'noticia_foto_delete' foto.uid %}"
                   class="btn btn-sm btn-outline-danger"
                   onclick="return confirm('Â¿Eliminar esta imagen?');">
                  ğŸ—‘ï¸ Eliminar
                </a>
              </div>
            </div>
          </div>
          {% empty %}
          <p class="text-muted">Esta noticia no tiene imÃ¡genes.</p>
          {% endfor %}
        </div>

        <hr>

        <!-- Subir nuevas imÃ¡genes -->
        <div class="mb-3">
          <label class="form-label fw-bold">Agregar nuevas imÃ¡genes</label>
          <input type="file" name="imagenes" class="form-control" multiple>
          <small class="text-muted">Puedes subir varias imÃ¡genes a la vez</small>
        </div>

        <!-- Botones -->
        <div class="d-flex justify-content-between mt-4">
          <a href="" class="btn btn-secondary">
            â¬… Volver
          </a>
          <button type="submit" class="btn btn-primary">
            ğŸ’¾ Guardar cambios
          </button>
        </div>

      </form>
    </div>
  </div>
</div>

<script>
  $(document).ready(function () {
    $('.summernote').summernote({
      height: 250,
      placeholder: 'Escribe el contenido de la noticia...',
      toolbar: [
        ['style', ['bold', 'italic', 'underline']],
        ['para', ['ul', 'ol', 'paragraph']],
        ['insert', ['link']],
        ['view', ['codeview']]
      ]
    });
  });
</script>



{% endblock %}
