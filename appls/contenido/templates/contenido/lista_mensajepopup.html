{% extends "dashboard/base_dashboard.html" %}

{% block dashboard_content %}

<div class="container my-5" style="max-width: 1100px;">

    <!-- T√≠tulo de la p√°gina -->
    <div class="text-center mb-5">
        <h1 class="fw-bold text-primary">Mensaje Pop UP</h1>
        <p class="text-muted">MEsajes Pop UP </p>
    </div>




    <div class="table-responsive">
    <table class="table table-hover align-middle shadow-sm">
      <thead class="table-light">
        <tr>
          <th>Imagen</th>
          <th>T√≠tulo</th>
          <th>Fecha</th>
          <th>Estado</th>
          <th class="text-center">Acciones</th>
        </tr>
      </thead>
      <tbody>

        {% for noticia in mensaje %}
        <tr>
          <!-- Imagen -->
          <td>
            {% for foto in noticia.fotosPopUP.all %}
                <img src="{{ foto.imagen.url }}"
                    class="img-thumbnail me-1 mb-1"
                    style="max-height:60px;">
            {% empty %}
                <span class="text-muted small">Sin im√°genes</span>
            {% endfor %}
            </td>
          <!-- T√≠tulo -->
          <td>
            <strong>{{ noticia.titulo }}</strong>
          </td>

          <!-- Fecha -->
          <td>
            {{ noticia.fecha_inicio|date:"d M Y" }} 
            Al
            {{ noticia.fecha_fin|date:"d M Y" }} 
          </td>

          <!-- Visible  -->
          <td class="text-muted">
            {% if noticia.activo %}
                Visible
            {% else  %}
                NO Visible
            {% endif %}
          </td>

          <!-- Acciones -->
          <td class="text-center">
            <a href="{% url 'popup_editar' noticia.id  %}" 
               class="btn btn-sm btn-outline-primary">
              ‚úèÔ∏è Editar
            </a>

            <a href="{% url 'popup_eliminar' noticia.id  %}" 
               class="btn btn-sm btn-outline-danger"
               onclick="return confirm('¬øSeguro que deseas eliminar este mensaje?');">
              üóëÔ∏è Eliminar
            </a>
          </td>
        </tr>

        {% empty %}
        <tr>
          <td colspan="5" class="text-center text-muted py-4">
            No hay noticias registradas.
          </td>
        </tr>
        {% endfor %}

      </tbody>
    </table>
  </div>
</div>









{% endblock %}