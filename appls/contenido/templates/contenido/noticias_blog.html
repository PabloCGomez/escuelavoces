{% extends "base.html" %}
{% load static %}

{% block title %}Escuela Voces{% endblock %}

{% block content %}


{% load static %}

<div class="container my-5">

  <!-- Encabezado -->
  <div class="text-center mb-5">
    <h1 class="fw-bold">Noticias</h1>
    <p class="text-muted">Todas nuestras novedades y comunicados</p>
  </div>

  <div class="row justify-content-center">
    <div class="col-lg-8">

      {% for noticia in noticia %}
      <article class="mb-5 pb-5 border-bottom">

        {% if noticia.fotos.all %}
<div id="carouselNoticia{{ noticia.id }}"
     class="carousel slide mb-4"
     data-bs-ride="carousel">

  <!-- Indicadores -->
  <div class="carousel-indicators">
    {% for foto in noticia.fotos.all %}
    <button type="button"
            data-bs-target="#carouselNoticia{{ noticia.id }}"
            data-bs-slide-to="{{ forloop.counter0 }}"
            class="{% if forloop.first %}active{% endif %}">
    </button>
    {% endfor %}
  </div>

  <!-- Imágenes -->
  <div class="carousel-inner rounded">
    {% for foto in noticia.fotos.all %}
    <div class="carousel-item {% if forloop.first %}active{% endif %}">
      <img src="{{ foto.imagen.url }}"
           class="d-block w-100"
           style="max-height: 380px; object-fit: cover;">
    </div>
    {% endfor %}
  </div>

  <!-- Controles -->
  <button class="carousel-control-prev"
          type="button"
          data-bs-target="#carouselNoticia{{ noticia.id }}"
          data-bs-slide="prev">
    <span class="carousel-control-prev-icon"></span>
  </button>

  <button class="carousel-control-next"
          type="button"
          data-bs-target="#carouselNoticia{{ noticia.id }}"
          data-bs-slide="next">
    <span class="carousel-control-next-icon"></span>
  </button>

</div>
{% endif %}


        <!-- Fecha -->
        <small class="text-muted d-block mb-2">
          {{ noticia.fecha_publicacion|date:"d F Y" }}
        </small>

        <!-- Título -->
        <h2 class="fw-bold mb-3">
          <a href=""
             class="text-decoration-none text-dark">
            {{ noticia.titulo }}
          </a>
        </h2>

        <!-- Extracto -->
        <p class="text-secondary fs-6">
          {{ noticia.contenido|striptags|truncatewords:35 }}
        </p>

        

      </article>
      {% empty %}
      <div class="text-center text-muted py-5">
        <i class="bi bi-journal-text fs-1"></i>
        <p class="mt-3">Aún no hay noticias publicadas.</p>
      </div>
      {% endfor %}

    </div>
  </div>
</div>

<style> 
article h2 a:hover {
  text-decoration: underline;
}

article img {
  transition: transform .3s ease;
}

article img:hover {
  transform: scale(1.01);
}

</style> 



{% endblock %}
